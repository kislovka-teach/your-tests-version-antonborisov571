## Вариант 1. API сервиса для попутных поездок.

### Модели данных:

1. _Пользователи_
    - Имя
    - Фамилия
    - Логин
    - Пароль
    - Дата регистрации
    - Номер телефона
    - Стаж вождения в годах (по умолчанию 0)
2. _Координаты_
    - Широта
    - Долгота
3. _Города_
    - Название города
    - Координаты города
4. _Поездки_
    - Водитель
    - Время выезда
    - Время приезда
    - Город отбытия
    - Город прибытия
    - Стоимость поездки
    - Максимальное количество пассажиров
    - Пассажиры (m-t-m с пользователями)
    - Машина (просто название)
    - Музыка (boolean, по умолчанию false)
    - Курение (boolean, по умолчанию false)
    - Животные (boolean, по умолчанию false)
4. _Отзывы_
    - Поездка
    - Пользователь отправитель
    - Пользователь получатель
    - Текст отзыва
    - Оценка

### Методы API:

1. ```/login``` - аутентификация пользователя по логину и паролю. Производится через JWT токен.
2. ```/trips/add``` - добавление новой поездки (передаётся все необходимые данные поездки: название городов, время отбытия, время прибытия, максимальное количество пассажиров, стоимость, машина, музыка, курение, животные)
3. ```/trips/by_cities_trips``` - (в body передаётся названия городов, дата поездки) возращает все незавершенные и неначавшияся поездки, со свободными местами, с соответствующими городами и временем поездки. Информация о поездках: идентификатор, город отбытия, город прибытия, время начала поездки, конца.
4. ```/trips/by_coordinates_trips``` - (в body передаётся координаты, дата поездки) возращает все незавершенные и неначавшияся поездки, со свободными местами, с соответствующими началом, концом пути и временем поездки. Информация о поездках: идентификатор, город отбытия, город прибытия, время начала поездки, конца.
5. ```/trips/{id}``` - id - идентификатор поездки, возращается информация о поездке, имя водителя, город отбытия, город прибытия, время начала поездки, конца, максимальное количество пассажиров, цена, машина, можно ли курить, брать животных, слушать свою музыку.
6. ```/trips/{id}/get_driver``` - id - идентификатор поездки, возращается информация о водителе, его оценка, сколько поездок, стаж вождения, дата регистрации и все отзывы о нём.
7. ```/trips/{id}/add_passenger``` - id - идентификатор поездки, забронировать поездку, если есть свободные места, то возращается сообщение об успехе и номер мобильного телефона водителя, в ином случае сообщение о том что все места заняты.
8. ```/trips/{id}/add_review``` - добавление отзыва о поездки, может пользователь, который был пассажиром и после завершения самой поездки.

### Особенности реализации:
- При создании jwt токена параметры issuer, audience можно оставить как пустые строки и не проверять их
- При добавлении новой поездки, идентификатор пользователя берется из токена
- Модели запроса и результата запроса могут отличаться от моделей БД
- ```/trips/by_coordinates_trips``` для данного endpoint-а нужно выбрать, те поездки, города которых находятся не более чем в 20 км от указанных координат. Расстояние можно посчитать по следующей формуле:

  L = arccos(sin(φА)·sin(φB) + cos(φА)·cos(φB)·cos(λА − λB)) * R,

  где φА, φB - широты пунктов в градусах [-90; 90],

  λА, λB - долготы пунктов в градусах [0; 180],

  R = 6371 км - радиус Земли